<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:b="http://bootsfaces.net/ui" xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:head>
	<h:outputStylesheet library="resource" name="estilo.css" />
	<h:outputStylesheet library="css" name="estilo.css" />
	<h:outputStylesheet library="css" name="pushy.css" />
	<h:outputStylesheet library="css" name="styles.css" />
</h:head>

<h:body>
	<p:growl>
		<p:autoUpdate />
	</p:growl>

	<div class="menu-lateral transform" id="menu-lateral">
		<div style="padding: 10px; padding-right: 15px; text-align: right">
			<span class="botao-fechar-menu">x</span>
		</div>
		<div class="menu-lateral-info-usuario">
			<h:graphicImage library="images" name="usuario.svg" width="28px"></h:graphicImage>
			<span>#{principalMBean.usuario.nome}</span>
		</div>
		<div class="menu-lateral-opcoes" style="top: 0">
			<div>
				<a class="menu-lateral-opcao"
					href="http://localhost:8080/crmonline/pags/moderador/index.xhtml"
					target="conteudo">Início</a>
			</div>
			<div>
				<a class="menu-lateral-opcao" href="http://localhost:8080/crmonline/pags/moderador/cliente.xhtml" target="conteudo" id="opcao_itens">Clientes</a>
			</div>
			<a class="menu-lateral-opcao" href="http://localhost:8080/crmonline/relatorio.xhtml" target="conteudo">Relatórios</a>
		 	<a class="opcao_submenu" href="http://localhost:8080/crmonline/pags/moderador/agendamentos.xhtml">Agenda</a>
		 	<a class="menu-lateral-opcao" href="http://localhost:8080/crmonline/contatos.xhtml" target="conteudo">Contatos</a>
		 </div>
	</div>
	<p:toolbar>
		<f:facet name="left">
			<p:commandButton value="☰" ajax="true" id="botao" />
		</f:facet>
	</p:toolbar>

	<p:dialog id="dialogInformaVisita" widgetVar="informaVisita">
		<p:outputLabel
			value="#{homeMB.visitaPendenteClicadaParaVisualizar.nome}" />
		<br />

		<p:outputLabel
			value="#{homeMB.visitaPendenteClicadaParaVisualizar.cliente.nome}" />
		<br />
		<p:outputLabel
			value="#{homeMB.visitaPendenteClicadaParaVisualizar.cursoObj.nome}" />
	</p:dialog>

	<p:panelGrid columns="5" style="width:100%; overflow: visible;">
		<h:panelGrid id="pagina" columns="1"
			style="width:30% !important; float:left;">
			<h:form>
				<p:dataList emptyMessage="Não foram encontradas visitas"
					value="#{relatorioMB.visitaRealizada}" var="visitasRealizada"
					type="ordered">

					<p:commandLink ajax="true" update="dialogInformaVisita"
						oncomplete="PF('informaVisita').show();">
						<p:panel>
							<f:facet name="header"> #{visitasRealizada.nome} </f:facet>
							<h:outputText value="Dia : " style="display:inline-block; font-weight: bold;" />
							<h:outputText value="#{relatorioMB.converteDate(visitasRealizada.data)}" />
							<br />
							<h:outputText value="Hora : " style="display:inline-block; font-weight: bold;" />
							<h:outputText value="#{visitasRealizada.hora}" />
							<br />
							<h:outputText value="Empresa : " style="display:inline-block; font-weight: bold;" />
							<h:outputText value="#{relatorioMB.mostraCliente(visitasRealizada.id_cliente)}" />
						</p:panel>
						<f:setPropertyActionListener value="#{visitasRealizada}"
							target="#{homeMB.visitaPendenteClicadaParaVisualizar}" />
					</p:commandLink>
					<hr />
				</p:dataList>
			</h:form>
		</h:panelGrid>
	</p:panelGrid>
</h:body>
<script>
	$("#botao").click(function() {
		$("#menu-lateral").addClass("menu-aberto");
	});

	$(".botao-fechar-menu").click(function() {
		$("#menu-lateral").removeClass("menu-aberto");
	});

	$(".menu-lateral-opcao").click(function() {
		if (this.id == "opcao_itens") {
			$("#submenu_itens").toggleClass("block");
		}
	});
</script>
</html>