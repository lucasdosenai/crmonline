<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:b="http://bootsfaces.net/ui" xmlns:p="http://primefaces.org/ui">
<h:head>
	<h:outputStylesheet library="resource" name="estilo.css" />
</h:head>

<h:body>
	<p:growl id="messages" showDetail="true">
		<p:autoUpdate />
	</p:growl>
	<nav class="nav-extended" style="background-color: black">
		<div class="nav-content">
			<ul class="tabs tabs-transparent">
				<li class="tab"><a href="#"><h:graphicImage library="img"
							name="logo.png" width="50px" height="50px" /></a></li>
				<li class="tab"><a href="#test1">AGENDAMENTOS</a></li>
				<li class="tab"><a href="#test2">CLIENTES</a></li>
				<li class="tab" style="margin-right: 50%"><a href="#test4">CADASTRO</a></li>

				<li class="tab"><a href="sass.html">Inicio</a></li>
				<li class="tab"><a href="badges.html">PERFIL</a></li>
				<li class="tab"><a href="collapsible.html">SAIR</a></li>
			</ul>
		</div>
	</nav>

	<p:toolbar>
		<f:facet name="left">
			<p:commandButton onclick="PF('novaVisita').show();"
				value="Nova Visita" icon="ui-icon-plus" />
			
			<p:commandButton value="Buscar Data" />
			
			<p:commandButton value="Buscar Hora"/>
			
			<p:selectOneMenu value="#{agendaMB.curso}" >
			<f:selectItem itemLabel="Buscar p/ Curso" itemValue=""/>
			<f:selectItems itemValue="#{c.id}" itemLabel="#{c.nome}" value="#{agendaMB.cursos}" var="c"/>
			
			</p:selectOneMenu>
			
			<p:selectOneMenu>
		<f:selectItem itemLabel="Buscar p/ Contato" itemValue="" />
		<f:selectItems value="#{contatosMB.contatos}" var="c" itemLabel="#{c.nome}" itemValue="#{c.id}"/>
	</p:selectOneMenu>
			
			<p:selectOneMenu value="#{agendaMB.agenda.id_cliente}">
						<f:selectItem itemLabel="Buscar p/ Cliente" />
						<f:selectItems value="#{clienteMB.clientes}" var="cli"
							itemLabel="#{cli.nome}" itemValue="#{cli.codigo}" />
					</p:selectOneMenu>
			
		</f:facet>
	</p:toolbar>
	<h:form id="formTabela">
		<p:dataTable id="tabela" value="#{agendaMB.visitas}" var="a">
			<p:column headerText="Nome da Visita">
				<h:outputText value="#{a.nome}" />
			</p:column>
			<p:column headerText="Atendente">
				<h:outputText value="#{a.atendente}" />
			</p:column>
			<p:column headerText="Data e Hora da Visita">
				<h:outputText
					value="Dia : #{agendaMB.getDate(a.data)} - Hora : #{a.hora}" />
			</p:column>
			<p:column headerText="Editar">
				<p:commandButton ajax="true" event="onclick" styleClass="btn"
					value="Excluir" onclick="PF('confirmaExcluir').show();">
					<f:setPropertyActionListener value="#{a}"
						target="#{agendaMB.agenda}" />
				</p:commandButton>

				<p:commandButton icon="ui-icon-pencil" value="Editar"
					update="dialog22" oncomplete="PF('edite').show();">
					<f:setPropertyActionListener value="#{a}"
						target="#{agendaMB.agenda}" />
				</p:commandButton>
				<p:commandButton onclstyleClass="btn" value="Realizar"
					onclick="PF('realizar').show();">
					<f:setPropertyActionListener value="#{a}"
						target="#{agendaMB.agenda}" />
					<p:confirm header="Confirma ?" message="Deseja realizar a visita ?"
						icon="ui-icon-alert" />
				</p:commandButton>
				<p:commandButton styleClass="btn" value="Visualizar"
					update="dlgVisu" oncomplete="PF('visualizar').show();">
					<f:setPropertyActionListener value="#{a}"
						target="#{agendaMB.agenda}" />
				</p:commandButton>
			</p:column>
		</p:dataTable>
	</h:form>
	<h:form id="formNovaVisita">
		<p:dialog id="dialog" header="NOVO VISITA" widgetVar="novaVisita"
			minHeight="40">
			<p:column headerText="Nova Visita">
				<p:inputText placeholder="NOME : " value="#{agendaMB.agenda.nome}" />
				<br />
				<p:inputText placeholder="ATENDENTE : "
					value="#{agendaMB.agenda.atendente}" />
				<br />
				<p:calendar value="#{agendaMB.agenda.data}" showOn="button"
					placeholder="Dia da Visita" mask="true" pattern="dd/MM/yyyy" />
				<br />

				<p:inputMask placeholder="Horário da Visita" size="40"
					styleClass="input_normal" mask="99:99"
					value="#{agendaMB.agenda.hora}" />

				<p:panelGrid columns="2">
					<p:selectOneMenu value="#{agendaMB.agenda.id_cliente}">
						<f:selectItem itemLabel="Selecionar Cliente" />
						<f:selectItems value="#{clienteMB.clientes}" var="cli"
							itemLabel="#{cli.nome}" itemValue="#{cli.codigo}" />
					</p:selectOneMenu>
					<h:panelGrid columns="2">
						<p:selectOneMenu id="cursos" value="#{agendaMB.agenda.curso}">
							<f:selectItem itemLabel="Selecionar Curso" />
							<f:selectItems var="c" value="#{agendaMB.cursos}"
								itemLabel="#{c.nome}" itemValue="#{c.id}" />
						</p:selectOneMenu>
						<p:commandButton value="+" onclick="PF('Add').show();" />
					</h:panelGrid>
				</p:panelGrid>

				<br />
				<p:commandButton value="Adicionar"
					actionListener="#{agendaMB.agendar}" ajax="true"
					update=":formTabela:tabela formNovaVisita" event="click"
					oncomplete="PF('novaVisita').hide();" />
			</p:column>
		</p:dialog>
	</h:form>



	<p:dialog widgetVar="Add">
		<h:form>
			<center>
				<p:panelGrid columns="1">
					<p:inputText placeholder="Nome" value="#{agendaMB.curso.nome}" />
					<p:inputText placeholder="Vagas"
						value="#{agendaMB.curso.VAGAS_TOTAL}" />
					<p:inputText placeholder="Descrição"
						value="#{agendaMB.curso.DESCRI}" />
					<p:inputText placeholder="Duração"
						value="#{agendaMB.curso.DURACAO}" />

					<p:selectOneMenu id="cursos" value="#{agendaMB.curso.CATEGORIA.id}"
						required="true" requiredMessage="Uma categoria é necessaria !">
						<f:selectItem itemLabel="Selecionar Categoria" itemValue="" />
						<f:selectItems var="c" value="#{agendaMB.categorias}"
							itemLabel="#{c.nome}" itemValue="#{c.id}" />
					</p:selectOneMenu>
				</p:panelGrid>
				<br />
				<p:commandButton value="Salvar novo curso !"
					action="#{agendaMB.salvarCurso}" ajax="true"
					update=":formNovaVisita:cursos" event="click" />
			</center>
		</h:form>
	</p:dialog>


	<p:dialog id="dialog22" draggable="true" maximizable="true"
		header="EDITA CLIENTE" widgetVar="edite" minHeight="40">
		<h:form id="formEditar">
			<p:column headerText="Editar Cliente">
				<p:inputText placeholder="NOME : " value="#{agendaMB.agenda.nome}" />
				<br />
				<p:inputText placeholder="ATENDENTE : "
					value="#{agendaMB.agenda.atendente}" />
				<br />
				<p:calendar value="#{agendaMB.agenda.data}" showOn="button"
					placeholder="Dia da Visita" mask="true" pattern="dd/MM/yyyy" />
				<br />

				<p:inputMask placeholder="Horário da Visita" size="40"
					styleClass="input_normal" mask="99:99"
					value="#{agendaMB.agenda.hora}" />

				<p:panelGrid columns="2">
					<p:selectOneMenu value="#{agendaMB.agenda.id_cliente}">
						<f:selectItem itemLabel="Selecionar Cliente" />
						<f:selectItems value="#{clienteMB.clientes}" var="cli"
							itemLabel="#{cli.nome}" itemValue="#{cli.codigo}" />
					</p:selectOneMenu>
					<h:panelGrid columns="2">
						<p:selectOneMenu id="cursos" value="#{agendaMB.agenda.curso}">
							<f:selectItem itemLabel="Selecionar Curso" />
							<f:selectItems var="c" value="#{agendaMB.cursos}"
								itemLabel="#{c.nome}" itemValue="#{c.id}" />
						</p:selectOneMenu>
						<p:commandButton value="+" onclick="PF('Add').show();" />
					</h:panelGrid>
				</p:panelGrid>

				<br />
				<p:commandButton value="Aplicar" action="#{agendaMB.editaVisita()}"
					ajax="true" onclick="PF('dialog22').hide();" />

			</p:column>
		</h:form>

	</p:dialog>

	<p:dialog widgetVar="realizar">
		<h:form>
			<h:outputText value="Classificação:" />
			<p:rating value="#{agendaMB.agenda.classificacao}">

			</p:rating>
			<h3>Observações:</h3>
			<p:inputTextarea value="#{agendaMB.agenda.observacao}" rows="6"
				cols="33" />

			<p:commandButton value="Visita Concluída" ajax="true"
				actionListener="#{agendaMB.realizaVisita}"
				oncomplete="PF('realizar').hide();" update="formTabela:tabela" />
		</h:form>
	</p:dialog>

	<p:dialog header="Values" widgetVar="dlg" showEffect="fade"
		hideEffect="fade">
		<h:panelGrid id="display" columns="2" cellpadding="5">
			<h:outputText value="Rating 3:" />
			<h:outputText value="#{ratingView.rating3}" />
		</h:panelGrid>
	</p:dialog>



	<p:dialog id="dlgVisu" widgetVar="visualizar">
		<h2>Nome da Visita</h2>
		<h:outputText value="#{agendaMB.agenda.nome}" />
		<h2>Atendente</h2>
		<h:outputText value="#{agendaMB.agenda.atendente}" />
		<h2>Data</h2>
		<h:outputText value="#{agendaMB.agenda.data}" />
		<h2>Hora</h2>
		<h:outputText value="#{agendaMB.agenda.hora}" />
		<h2>Cliente</h2>
		<h:outputText value="#{agendaMB.agenda.cliente.nome}" />
		<h2>Curso</h2>
		<h:outputText value="#{agendaMB.agenda.cursoObj.nome}" />
		<br> </br>
		<p:commandButton value="Voltar" ajax="true" />
	</p:dialog>




	<p:dialog widgetVar="confirmaExcluir"
		header="Gostaria de excluir essa visita ?">
		<p:column headerText="">
			<p:commandButton value="Sim" action="#{agendaMB.excluiVisita}" onclick="PF('confirmaExcluir').hide();"
				ajax="true" update=":formTabela:tabela" />
			<p:commandButton value="Não" type="button"
				styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
		</p:column>
	</p:dialog>
	
 <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
        <p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes" icon="pi pi-check" />
        <p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no" icon="pi pi-times" />
    </p:confirmDialog>    
      
</h:body>
</html>